<html>
<head>
<link rel="stylesheet" class="text/css" href="<?php
include 'cms.config';
print $stylesheet;
?>">
<script type="text/javascript" src="old/cms.js"></script>
<script type="text/javascript">

// Stole this code from StackOverflow, changed it to use a blank png instead of "none," since Chrome doesn't support "none." This code makes the cursor dissappear if it's idle over the background. Not extremely reliable, though, so it's commented out for now...

/*
    var mouseTimer = null, cursorVisible = true;

    function disappearCursor() {
        mouseTimer = null;
        document.body.style.cursor = "url(blank.png)";
        cursorVisible = false;
    }

    document.onmousemove = function() {
        if (mouseTimer) {
            window.clearTimeout(mouseTimer);
        }
        if (!cursorVisible) {
            document.body.style.cursor = "default";
            cursorVisible = true;
        }
        mouseTimer = window.setTimeout(disappearCursor, 100);
    };
*/

// This code should make the next episode play when this one is over... maybe...
	
	function movieOver() {
		top.location="video.html?f=<?php

$current_file=$_GET["f"];
$current_directory=substr($current_file,0,strlen($current_file)-strlen(strrchr($current_file,"/")));

foreach(scandir($current_directory) as $file)
{
 if ($last_file==$current_file)
  print urlencode($current_directory)."/".urlencode($file);
 $last_file=htmlentities($current_directory)."/".htmlentities($file);
}
		
?>";
	};


	
	document.onkeypress = function(key) {
		//if (!key) key = window.event;
  
		//var code;
		//if ((key.charCode) && (key.keyCode==0))
		//	code = key.charCode
		//else
		//	code = key.keyCode;
		//alert("code");
	}
	
</script>
</head>

<!-- The overflow lines hide the scrollbars, and the javascript events resize the video so it'll always fit. -->

<body style="overflow-x:hidden;overflow-y:hidden;" onresize="fixvideo();" onload="fixvideo();">
<center>
<video controls autoplay src="<?php

// This just puts the filename passed in the url into the source for the video. Since there's only one video, I think this is the appropriate way to do the source, rather than having a sub-tag inside the video for the source.

print $_GET['f'];
?>" id="thevideo"  onEnded="movieOver()"></video>
</div>
</center>
</body>
</html>
